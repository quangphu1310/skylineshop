@{
    ViewBag.Title = "Home Page";
    Layout = "~/Views/Shared/_LayoutContainer.cshtml";
}

<section class="hero">
    <div class="hero__slider owl-carousel">
        <div class="hero__items set-bg wow fadeInLeft"
             data-wow-delay="0.5s"
             data-setbg="/Assets/img/hero/hero-1.jpg">
            <div class="container">
                <div class="row">
                    <div class="col-xl-5 col-lg-7 col-md-8">
                        <div class="hero__text wow fadeInUp" data-wow-delay="0.9s">
                            <h6 class="wow fadeInUp" data-wow-delay="0.5s">
                                Bộ sưu tập mùa thu
                            </h6>
                            <h2 class="wow fadeInUp" data-wow-delay="1.3s">
                                Bộ sưu tập Thu – Đông 2030
                            </h2>
                            <p class="wow fadeInUp" data-wow-delay="1.6s">
                                Một nhãn hiệu chuyên tạo ra những sản phẩm thiết yếu sang
                                trọng. Được xây dựng có đạo đức với cam kết vững chắc về
                                chất lượng vượt trội.
                            </p>
                            <a href="~/Shop"
                               class="primary-btn wow fadeInUp"
                               data-wow-delay="1.8s">
                                Mua ngay <span class="arrow_right"></span>
                            </a>
                            <div class="hero__social">
                                <a href="#"><i class="fa fa-facebook"></i></a>
                                <a href="#"><i class="fa fa-twitter"></i></a>
                                <a href="#"><i class="fa fa-pinterest"></i></a>
                                <a href="#"><i class="fa fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="hero__items set-bg" data-setbg="/Assets/img/hero/hero-2.jpg">
            <div class="container">
                <div class="row">
                    <div class="col-xl-5 col-lg-7 col-md-8">
                        <div class="hero__text wow fadeInUp" data-wow-delay="0.9s">
                            <h6 class="wow fadeInUp" data-wow-delay="0.5s">
                                Bộ sưu tập mùa thu
                            </h6>
                            <h2 class="wow fadeInUp" data-wow-delay="1.3s">
                                Bộ sưu tập Thu – Đông 2030
                            </h2>
                            <p class="wow fadeInUp" data-wow-delay="1.6s">
                                Một nhãn hiệu chuyên tạo ra những sản phẩm thiết yếu sang
                                trọng. Được xây dựng có đạo đức với cam kết vững chắc về
                                chất lượng vượt trội.
                            </p>
                            <a href="~/Shop"
                               class="primary-btn wow fadeInUp"
                               data-wow-delay="1.8s">
                                Mua ngay <span class="arrow_right"></span>
                            </a>
                            <div class="hero__social">
                                <a href="#"><i class="fa fa-facebook"></i></a>
                                <a href="#"><i class="fa fa-twitter"></i></a>
                                <a href="#"><i class="fa fa-pinterest"></i></a>
                                <a href="#"><i class="fa fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Hero Section End -->
<!-- Banner Section Begin -->
<section class="banner spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-7 offset-lg-4">
                <div class="banner__item">
                    <div class="banner__item__pic">
                        <img class="wow slideInLeft"
                             data-wow-delay="0.5s"
                             src="/Assets/img/product/dosiin-ssstutter-quan-au-nu-ssstutter-ong-suong-birdie-pants-497662497662.jpg"
                             alt="" />
                    </div>
                    <div class="banner__item__text wow fadeInRight"
                         data-wow-delay="0.5s">
                        <h2>Bộ sưu tập quần áo 2030</h2>
                        <a href="~/Shop">Mua ngay</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="banner__item banner__item--middle">
                    <div class="banner__item__pic wow fadeOutRight"
                         data-wow-delay="0.5s">
                        <img src="/Assets/img/product/dosiin-vong-tay-paracord-sjb-steed-403391403391.jpg" alt="" />
                    </div>
                    <div class="banner__item__text wow fadeOutLeft"
                         data-wow-delay="0.5s">
                        <h2>Phụ kiện đa dạng</h2>
                        <a href="~/Shop">Mua ngay</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-7">
                <div class="banner__item banner__item--last">
                    <div class="banner__item__pic wow zoomIn" data-wow-delay="1.5s">
                        <img src="/Assets/img/product/dosiin-converse-giay-sneakers-converse-chuck-taylor-all-star-s-recycled-rpet-canvas-c-391790391790.jpg" alt="" />
                    </div>
                    <div class="banner__item__text wow zoomInUp"
                         data-wow-delay="1.5s">
                        <h2>Giày hottrend</h2>
                        <a href="~/Shop">Mua ngay</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Banner Section End -->
<!-- Product Section Begin -->
<section class="product spad">
    <div class="container">
        <div class="row wow fadeInUp" data-wow-delay="0.6s">
            <div class="col-lg-12">
                <ul class="filter__controls">
                    <li class="active" data-filter="*">Sản phẩm bán chạy nhất</li>
                    <li data-filter=".new-arrivals">Hàng mới về</li>
                    <li data-filter=".hot-sale">Khuyến mãi hot</li>
                </ul>
            </div>
        </div>
        <div class="row product__filter">
            @foreach (var product1 in ViewBag.Product)
            {
                <div class="col-lg-3 col-md-6 col-sm-6 col-md-6 col-sm-6 mix hot-sales">
                    <div class="product__item wow fadeInUpBig" data-wow-delay="0.6s">
                        <div class="product__item__pic set-bg"
                             data-setbg="/Assets/img/product/@product1.ProductImage">
                            <ul class="product__hover">

                                <li>
                                    @{
                                        var sizeName = "";
                                    }
                                    @if (product1.IDcate == 1 || product1.IDcate == 2)
                                    {
                                        sizeName = "M";
                                    }
                                    else if (product1.IDcate == 3)
                                    {
                                        sizeName = "40";
                                    }
                                    <a href="#" class="add-to-cart-button"
                                       data-product-id="@product1.ProductID"
                                       data-quantity="1"
                                       data-size="@sizeName"
                                       data-image="@product1.ProductImage">
                                        <img src="/Assets/img/icon/cart.png" alt="" />
                                        <span>Add to Cart</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="product__item__text">
                            <a class="product-title" href="/Shop/ProductDetail?idProduct=@product1.ProductID"><h6>@product1.ProductName</h6></a>
                            <div class="rating">
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                            </div>
                            <h5>@String.Format("{0:0,0}", product1.ProductPrice)</h5>
                        </div>
                    </div>
                </div>
            }


            @foreach (var product2 in ViewBag.Product2)
            {
                <div class="col-lg-3 col-md-6 col-sm-6 col-md-6 col-sm-6 mix new-arrivals">
                    <div class="product__item wow fadeInUpBig" data-wow-delay="0.5s">
                        <div class="product__item__pic set-bg"
                             data-setbg="/Assets/img/product/@product2.ProductImage">
                            <ul class="product__hover">

                                <li>
                                    @{
                                        var sizeName = "";
                                    }
                                    @if (product2.IDcate == 1 || product2.IDcate == 2)
                                    {
                                        sizeName = "M";
                                    }
                                    else if (product2.IDcate == 3)
                                    {
                                        sizeName = "40";
                                    }
                                    <a href="#" class="add-to-cart-button"
                                       data-product-id="@product2.ProductID"
                                       data-quantity="1"
                                       data-size="@sizeName"
                                       data-image="@product2.ProductImage">
                                        <img src="/Assets/img/icon/cart.png" alt="" />
                                        <span>Add to Cart</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="product__item__text">
                            <a class="product-title" href="/Shop/ProductDetail?idProduct=@product2.ProductID"><h6>@product2.ProductName</h6></a>
                            <div class="rating">
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                                <i class="fa fa-star-o"></i>
                            </div>
                            <h5>@String.Format("{0:0,0}", product2.ProductPrice)</h5>
                        </div>
                    </div>
                </div>
            }

        </div>
    </div>
</section>
<!-- Product Section End -->
<!-- Categories Section Begin -->
<section class="categories spad wow fadeInLeft" data-wow-delay="0.5s">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="categories__text">
                    <h2>
                        Quần áo Hot<br />
                        <span>Bộ sưu tập quần</span> <br />
                        Áo hottrend
                    </h2>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="categories__hot__deal">
                    <img src="/Assets/img/Product/@ViewBag.Product3.ProductImage" alt="" />
                    <div class="hot__deal__sticker">
                        <span>Giảm giá</span>
                        <h5>@String.Format("{0:0,0}", ViewBag.Product3.ProductPrice)</h5>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 offset-lg-1">
                <div class="categories__deal__countdown">
                    <span>Ưu đãi của tuần</span>
                    <h2>@ViewBag.Product3.ProductName</h2>
                    <div class="categories__deal__countdown__timer" id="countdown">
                        <div class="cd-item">
                            <span>3</span>
                            <p>Ngày</p>
                        </div>
                        <div class="cd-item">
                            <span>1</span>
                            <p>Giờ</p>
                        </div>
                        <div class="cd-item">
                            <span>50</span>
                            <p>Phút</p>
                        </div>
                        <div class="cd-item">
                            <span>18</span>
                            <p>Giây</p>
                        </div>
                    </div>
                    <a href="~/Shop/ProductDetail?idProduct=@ViewBag.Product3.ProductID" class="primary-btn">Mua ngay</a>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Categories Section End -->
<!-- Instagram Section Begin -->
<section class="instagram spad wow fadeInRight" data-wow-delay="0.5s">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="instagram__pic">
                    <div class="instagram__pic__item set-bg"
                         data-setbg="/Assets/img/instagram/instagram-1.jpg"></div>
                    <div class="instagram__pic__item set-bg"
                         data-setbg="/Assets/img/instagram/instagram-2.jpg"></div>
                    <div class="instagram__pic__item set-bg"
                         data-setbg="/Assets/img/instagram/instagram-3.jpg"></div>
                    <div class="instagram__pic__item set-bg"
                         data-setbg="/Assets/img/instagram/instagram-4.jpg"></div>
                    <div class="instagram__pic__item set-bg"
                         data-setbg="/Assets/img/instagram/instagram-5.jpg"></div>
                    <div class="instagram__pic__item set-bg"
                         data-setbg="/Assets/img/instagram/instagram-6.jpg"></div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="instagram__text">
                    <h2>Instagram</h2>
                    <p>Theo dõi Instagram của chúng tôi</p>
                    <h3>#Skyline_Shop</h3>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Instagram Section End -->
<!-- Latest Blog Section Begin -->
<section class="latest spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-title wow slideInLeft" data-wow-delay="0.5s">
                    <span>Tin tức mới nhất</span>
                    <h2>Xu hướng thời trang mới</h2>
                </div>
            </div>
        </div>
        <div class="row wow fadeInUpBig" data-wow-delay="0.5s">
            <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="blog__item">
                    <div class="blog__item__pic set-bg"
                         data-setbg="/Assets/img/blog/blog-1.jpg"></div>
                    <div class="blog__item__text">
                        <span>
                            <img src="/Assets/img/icon/calendar.png" alt="" /> 16 tháng 2
                            2020
                        </span>
                        <h5>Hihi SkyShop</h5>
                        <a href="#">Đọc thêm</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="blog__item">
                    <div class="blog__item__pic set-bg"
                         data-setbg="/Assets/img/blog/blog-2.jpg"></div>
                    <div class="blog__item__text">
                        <span>
                            <img src="/Assets/img/icon/calendar.png" alt="" /> Ngày 21 tháng 2
                            2020
                        </span>
                        <h5>Xả kho cùng Skyline team</h5>
                        <a href="#">Đọc thêm</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="blog__item">
                    <div class="blog__item__pic set-bg"
                         data-setbg="/Assets/img/blog/blog-3.jpg"></div>
                    <div class="blog__item__text">
                        <span>
                            <img src="/Assets/img/icon/calendar.png" alt="" /> Ngày 28 tháng 2
                            2020
                        </span>
                        <h5>Mua rẻ hơn với Skyline Shop</h5>
                        <a href="#">Đọc thêm</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
@{
    var check = TempData["PaymentSuccess"];
}

@if (check == "check")
{

    <script>

        Swal.fire({
            position: "center",
            icon: "success",
            title: "Đặt hàng thành công!",
            showConfirmButton: false,
            timer: 1500
        });
    </script>
}

<!-- Latest Blog Section End -->
@section scripts{
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    </head>
    <script>

        //dùng ajax cho giỏ hàng
        $(document).ready(function () {
            $(".add-to-cart-button").click(function (e) {
                e.preventDefault();

                var productID = $(this).data("product-id");
                var quantity = $(this).data("quantity");
                var size = $(this).data("size");
                var image = $(this).data("image");

                $.ajax({
                    url: '/Cart/AddItem', // Điều hướng tới action xử lý thêm sản phẩm vào giỏ hàng
                    method: 'POST',
                    data: {
                        productid: productID,
                        quantity: quantity,
                        size: size,
                        image: image
                    },
                    success: function (response) {
                        if (response.success) {
                            // Thực hiện các hành động sau khi thêm sản phẩm thành công
                            const Toast = Swal.mixin({
                                toast: true,
                                position: 'top-right',
                                showConfirmButton: false,
                                timer: 3000,
                                timerProgressBar: true,
                                didOpen: (toast) => {
                                    toast.addEventListener('mouseenter', Swal.stopTimer)
                                    toast.addEventListener('mouseleave', Swal.resumeTimer)
                                }
                            })

                            Toast.fire({
                                icon: 'success',
                                title: 'Thêm vào giỏ hàng thành công'
                            })
                            var itemCount = response.countCart;
                            $('#CartCount').text(itemCount);
                        } else {
                            // Xử lý khi có lỗi
                            Swal.fire({
                                icon: 'error',
                                title: 'Oops...',
                                text: 'Something went wrong!'
                            })
                        }
                    },
                    error: function (xhr, status, error) {
                        // Xử lý khi có lỗi Ajax
                        alert("Lỗi Ajax: " + error);
                    }
                });
            });
        });


    </script>
}

